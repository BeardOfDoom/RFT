{{define "content"}}
<style type="text/css">

body {
background: url(Web/Images/TrainsAndTickets/trainBlur.jpg) no-repeat center center fixed;
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
}

.mainT {
  margin-top: 6%;
}

.inner {
  color: black;
  text-shadow: 0 0 0.2em #fff, 0 0 0.2em #fff;
  padding: 20;
}

.se {
  color: black;
  text-shadow: 0 0 0.2em #fff, 0 0 0.2em #fff;
}

.se:hover {
  color:red;
  text-decoration: none;
}

.separator {
  padding: 10;
}

.title {
  font-family: 'Open Sans', sans-serif;
  color: black;
  font-size: 28px;
  font-weight: bold;
  text-shadow: 0 0 0.2em #fff, 0 0 0.2em #fff;
}

.description {
  font-family: 'Open Sans', sans-serif;
  color: black;
  text-shadow: 0 0 0.2em #fff, 0 0 0.2em #fff;
  font-size: 20px;
  vertical-align: top;
}

table {
  font-family: 'Open Sans', sans-serif;
  border-width: thick;
  border-color: black;
}

</style>
<script>

  security();

  var wagons = {{ .Wagons }};
  var len = wagons.length;

  $(document).ready(function(){

    var select = document.getElementById("wagonsSelect");

    for (i = 0; i < len; i++) {
      var option = document.createElement("option");
      option.text = wagons[i].WagonID + " ( " + wagons[i].Class + " osztály )";
      option.value = i;
      select.add(option);
    }

  });


</script>

<select id="wagonsSelect"></select>

<script>

$("#wagonsSelect").on('change', function() {
  document.cookie="seat=" + this.value;
  buildReservationForm();
})

  function buildReservationForm() {

    var wagonIndex = getCookie("seat");

    if (wagonIndex == undefined) {
      wagonIndex = 0;
    }

    var seats = wagons[wagonIndex].Seats;

    var numberOfSeats = wagons[wagonIndex].NumberOfSeats;
    var sideOne = Math.floor(numberOfSeats / 2) + numberOfSeats % 2;
    var sideTwo = Math.floor(numberOfSeats / 2);
    var sideOneA = Math.floor(sideOne / 2) + sideOne % 2;
    var sideOneB = Math.floor(sideOne / 2);
    var sideTwoA = Math.floor(sideTwo / 2);
    var sideTwoB = Math.floor(sideTwo / 2) + sideTwo % 2;
    var seat;


    document.write('<table align="center" border="0" class="mainT">');
      document.write('<tr>');
        document.write('<td colspan="3" align="center" class="title">Helyjegy Választás</td>');
      document.write('</tr>');
      document.write('<tr>');
        document.write('<td>');
          document.write('<img src="Web/Images/TrainsAndTickets/train2.png" height="400px"/>');
        document.write('</td>');
        document.write('<td>');
          document.write('<table border="1" align="center">');
            document.write('<tr>');
              document.write('<td>');
                document.write('<table border="1">');
                    document.write('<tr align="center">');

                        seat = 1;
                        for (i = 1; i <= sideOneA; i++) {
                          if (seats[seat]) {
                            color = "rgba(255, 0, 0, 0.5)";
                          } else {
                            color = "rgba(0, 255, 0, 0.5)";
                          }

                          document.write("<td class=\"inner\" style=\"background-color: " + color + ";\"><a href='#' class='se'>" + seat + "</a></td>");
                          seat += 4;
                        }

                    document.write('</tr>');
                  document.write('<tr  align="center">');

                        seat = 2;
                        for (i = 1; i <= sideOneB; i++) {
                          if (seats[seat]) {
                            color = "rgba(255, 0, 0, 0.5)";
                          } else {
                            color = "rgba(0, 255, 0, 0.5)";
                          }

                          document.write("<td class=\"inner\" style=\"background-color: " + color + ";\"><a href='#' class='se'>" + seat + "</a></td>");
                            seat += 4;
                        }

                    document.write('</tr>');
                document.write('</table>');
              document.write('</td>');
            document.write('</tr>');
            document.write('<tr>');
              document.write('<td class="separator">');
                document.write('<br/>');
              document.write('</td>');
            document.write('</tr>');
            document.write('<tr>');
              document.write('<td>');
                document.write('<table border="1">');
                  document.write('<tr align="center">');

                      seat = 3;
                      for (i = 1; i <= sideTwoA; i++) {
                        if (seats[seat]) {
                          color = "rgba(255, 0, 0, 0.5)";
                        } else {
                          color = "rgba(0, 255, 0, 0.5)";
                        }

                        document.write("<td class=\"inner\" style=\"background-color: " + color + ";\"><a href='#' class='se'>" + seat + "</a></td>");
                        seat += 4;
                      }

                  document.write('</tr>');
                  document.write('<tr align="center">');

                      seat = 4;
                      for (i = 1; i <= sideTwoB; i++) {
                        if (seats[seat]) {
                          color = "rgba(255, 0, 0, 0.5)";
                        } else {
                          color = "rgba(0, 255, 0, 0.5)";
                        }

                        document.write("<td class=\"inner\" style=\"background-color: " + color + ";\"><a href='#' class='se'>" + seat + "</a></td>");
                        if (sideOneA > sideOneB && sideTwoB > sideTwoA && i == sideTwoB - 1) {
                          seat += 2;
                        } else if (sideOneA == sideOneB && sideTwoB > sideTwoA && i == sideTwoB - 1) {
                          seat += 3;
                        } else {
                          seat += 4;
                        }
                      }

                  document.write('</tr>');
                document.write('</table>');
              document.write('</td>');
            document.write('</tr>');
          document.write('</table>');
        document.write('</td>');
        document.write('<td class="description" align="right">');
          document.write('Zöld  - szabad hely<br/>');
          document.write('Piros - foglalt hely');
        document.write('</td>');
      document.write('</tr>');
    document.write('</table>');
  }
</script>

{{end}}
